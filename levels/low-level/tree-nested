[description]

트리는 다른 트리를 가리킬 수도 있습니다! 이렇게 하면 중첩된 디렉토리 구조를 설명할 수 있습니다.

디렉토리 내부에 파일을 인덱스에 추가한 다음 `git write-tree`를 호출하면, 해당 디렉토리에 대한 중첩 트리를 만들고 Blob을 연결합니다.

이 레벨을 해결하려면 왼쪽에 표시된 것처럼 두 개의 Blob을 가리키는 트리와 두 개의 Blob을 가리키는 트리를 가진 작은 스틱 피규어를 만드세요.

[setup]

[setup goal]

echo "I'm the left arm" > arm1
echo "I'm the right arm" > arm2
mkdir hip
echo "I'm the left leg" > hip/leg1
echo "I'm the right leg" > hip/leg2
git add .
git write-tree

# 축하합니다! 스틱 피규어를 성공적으로 만들었습니다!

[win]

TREES=$(git cat-file --batch-check='%(objectname) %(objecttype)' --batch-all-objects | grep tree | cut -f1 -d" ")

for OUTER_TREE in $TREES; do
    NUMBER_OF_BLOB_CHILDREN=$(git cat-file -p $OUTER_TREE | cut -f2 -d" " | grep blob | wc -l)
    NUMBER_OF_TREE_CHILDREN=$(git cat-file -p $OUTER_TREE | cut -f2 -d" " | grep tree | wc -l)

    if [ $NUMBER_OF_BLOB_CHILDREN -eq 2 -a $NUMBER_OF_TREE_CHILDREN -eq 1 ]; then
        TREE_CHILD=$(git cat-file -p $OUTER_TREE | cut -f1 | grep tree | cut -d" " -f3)
        NUMBER_OF_BLOB_CHILDREN_OF_TREE_CHILD=$(git cat-file -p $TREE_CHILD | cut -f2 -d" " | grep blob | wc -l)
        if [ $NUMBER_OF_BLOB_CHILDREN_OF_TREE_CHILD -eq 2 ]; then
            return 0
        fi
    fi
done

return 1