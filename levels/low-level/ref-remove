[설명]

마지막으로, ref를 삭제하려면

    git update-ref -d refs/<refname>

모든 refs를 삭제하세요! :P (단, HEAD는 제외합니다. HEAD는 특별합니다.)

[setup]

echo hello > hello
echo world > world
BLOB1=$(git hash-object -w hello)
BLOB2=$(git hash-object -w world)
git add .
TREE=$(git write-tree)
COMMIT=$(git commit-tree $TREE -m "Initial commit")

git update-ref refs/best_blob_ever "$BLOB1"
git update-ref refs/beautiful_commit "$COMMIT"

[setup goal]

echo hello > hello
echo world > world
BLOB1=$(git hash-object -w hello)
BLOB2=$(git hash-object -w world)
git add .
TREE=$(git write-tree)
COMMIT=$(git commit-tree $TREE -m "Initial commit")

git update-ref refs/best_blob_ever "$BLOB1"
git update-ref refs/beautiful_commit "$COMMIT"

for REF in $(git for-each-ref --format='%(refname)'); do
    git update-ref -d "$REF"
done

[승리]

test "$(git show-ref | wc -l)" -eq 0